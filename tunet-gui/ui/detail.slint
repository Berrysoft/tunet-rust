import { Button, StandardTableView, StyleMetrics, VerticalBox } from "std-widgets.slint";

export global DetailModel {
    in property <bool> busy: false;

    out property <bool> dark: StyleMetrics.dark-color-scheme;
    in property <image> daily-chart;

    in property <[[StandardListViewItem]]> details: [];
    callback sort_ascending(int);
    callback sort_descending(int);
    callback refresh();
}

export component DetailPage inherits VerticalBox {
    VerticalBox {
        Image {
            source: DetailModel.daily-chart;
        }
        StandardTableView {
            columns: [
                { title: "登录时间" },
                { title: "注销时间" },
                { title: "流量" },
            ];
            rows: DetailModel.details;
            sort-ascending(index) => {
                DetailModel.sort_ascending(index);
            }
            sort-descending(index) => {
                DetailModel.sort-descending(index);
            }
        }
        Button {
            text: "刷新";
            enabled: !DetailModel.busy;
            clicked => { DetailModel.refresh() }
        }
    }
}
